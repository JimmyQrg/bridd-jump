<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bridd Jump</title>
<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif; }
canvas { display:block; }
#ui { position:absolute; top:0; left:0; width:100%; height:100%; text-align:center; pointer-events:none; }
#startScreen {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    width:400px; padding:40px; background:rgba(0,0,0,0.9);
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    pointer-events:all; font-size:30px; color:#0ff; text-shadow:0 0 20px #0ff;
    border:3px solid #0ff; border-radius:20px;
}
button { font-size:32px; padding:15px 40px; cursor:pointer; margin-top:30px; color:#0ff; background:black; border:3px solid #0ff; border-radius:12px; transition:0.3s; }
button:hover { color:black; background:#0ff; }
h1 { font-size:60px; margin-bottom:20px; text-shadow: 0 0 20px #0ff, 0 0 40px #0ff, 0 0 60px #0ff; animation: glow 1.5s infinite alternate; }
@keyframes glow { 0% { text-shadow:0 0 10px #0ff,0 0 20px #0ff;} 100% {text-shadow:0 0 40px #0ff,0 0 80px #0ff;} }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="ui">
  <div id="startScreen">
    <h1>BRIDD JUMP</h1>
    <div id="bestScore">Best Score: 0</div>
    <button id="startBtn">START</button>
  </div>
</div>
<script>
const canvas=document.getElementById("gameCanvas");
const ctx=canvas.getContext("2d");
canvas.width=window.innerWidth;
canvas.height=window.innerHeight;

const BLOCK_SIZE=50;
const JUMP_SPEED=-15;
const GRAVITY=0.7;

let keys={}, score=0, bestScore=0, lastTime=0, gameStarted=false, animationId=null;
let crashPieces=[], particles=[], playerTrail=[];
let baseColors=[{r:255,g:0,b:0},{r:255,g:153,b:0},{r:255,g:255,b:0},{r:0,g:255,g:0},{r:0,g:255,b:255},{r:0,g:0,b:255},{r:153,g:0,b:255}];
let colorIndex=0, platformColor={r:255,g:0,b:0}, nextColor=baseColors[1], colorLerp=0;
let globalTime=0;

let player={
    x:100, y:0, width:40, height:50,
    color:"#0ff", vy:0, speed:15,
    hitboxScale:0.6, jumpsLeft:1, onGround:false, visible:true,
    frame:0, animTime:0, state:"idle"
};

let platforms=[], spikes=[], lines=[], gems=[], ground=[];

// Input
window.addEventListener("keydown", e=>{ if(["KeyW","ArrowUp","Space"].includes(e.code)) jump(); keys[e.code]=true; });
window.addEventListener("keyup", e=>keys[e.code]=false);
window.addEventListener("mousedown", ()=>jump());
window.addEventListener("touchstart", ()=>jump());

function jump(){
    if(!player.visible) return;
    if(player.jumpsLeft>0){
        player.vy=JUMP_SPEED;
        spawnParticles(player.x+player.width/2, player.y+player.height, player.jumpsLeft===2?"jump":"double");
        playerTrail.push({x:player.x+player.width/2, y:player.y+player.height/2, life:20});
        player.jumpsLeft--;
        player.state = player.jumpsLeft===1?"jump":"doublejump";
        player.animTime=0; player.frame=0;
    }
}

function resetGame(){
    if(animationId) cancelAnimationFrame(animationId);

    // Reset player
    player.x = 100;
    player.y = canvas.height/2 - player.height;
    player.vy = 0;
    player.speed = 15;
    player.jumpsLeft = 1;
    player.onGround = false;
    player.visible = true;
    player.state = "idle";
    player.frame = 0;
    player.animTime = 0;

    // Reset game elements
    platforms = [];
    spikes = [];
    gems = [];
    crashPieces = [];
    particles = [];
    lines = [];
    ground = [];
    playerTrail = [];

    // Reset color and score
    score = 0;
    colorLerp = 0;
    globalTime = 0;
    platformColor = {...baseColors[0]};
    colorIndex = 0;
    nextColor = baseColors[1];

    // Generate starting platform and ground
    platforms.push({x:0, y:player.y+player.height, width:BLOCK_SIZE*10, height:BLOCK_SIZE, color:{...platformColor}, passed:false});
    ground.push({x:0, y:canvas.height-BLOCK_SIZE, width:canvas.width*10, height:BLOCK_SIZE, color:{r:50,g:50,b:50}});

    lastTime = performance.now();
    cameraX = player.x - 150;
    cameraY = player.y - canvas.height/2 + player.height*1.2;

    hideStartScreen();
    gameStarted = true;
    update(lastTime);
}

function hideStartScreen(){
    document.getElementById("startScreen").style.display = "none";
}

document.getElementById("startBtn").addEventListener("click", ()=>{
    resetGame();
});

// The rest of your previous functions (generateBlockPlatform, checkSpikeCollision, createCrash, spawnParticles, tryDie, addLine, lerpColor, rgb, drawPlayer, update, etc.) remain the same as before, including player animations and effects

</script>
</body>
</html>
