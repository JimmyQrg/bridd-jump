<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Bridd Jump | Infinite Campus</title>
<link rel="icon" type="image/png" href="infinite-campus-icon.png">
<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif; }
canvas { display:block; }
#ui { position:absolute; top:0; left:0; width:100%; height:100%; text-align:center; pointer-events:none; }
#startScreen {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    width:400px; padding:40px; background:rgba(0,0,0,0.9);
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    pointer-events:all; font-size:30px; color:#0ff; text-shadow:0 0 20px #0ff;
    border:3px solid #0ff; border-radius:20px;
}
button { font-size:28px; padding:12px 36px; cursor:pointer; margin-top:20px; color:#0ff; background:black; border:3px solid #0ff; border-radius:12px; transition:0.3s; }
button:hover { color:black; background:#0ff; }
h1 { font-size:60px; margin-bottom:20px; text-shadow: 0 0 20px #0ff, 0 0 40px #0ff, 0 0 60px #0ff; animation: glow 1.5s infinite alternate; }
@keyframes glow { 0% { text-shadow:0 0 10px #0ff,0 0 20px #0ff;} 100% {text-shadow:0 0 40px #0ff,0 0 80px #0ff;} }

#advancedPanel {
    display:none; position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    width:460px; background:rgba(0,0,0,0.95); border:3px solid #0ff; border-radius:20px; color:#0ff;
    font-size:18px; padding:20px; pointer-events:all; flex-direction:column;
}
#advancedPanel h2 { font-size:22px; margin:0; }
.adv-row { display:flex; justify-content:space-between; align-items:center; margin:6px 0; }
.adv-slider { width:220px; }
.adv-buttons { display:flex; justify-content:flex-end; gap:10px; margin-top:10px; }
.adv-buttons button { font-size:18px; padding:6px 20px; }
#openAdvanced {position:absolute; top:20px; right:20px; width:50px; height:50px; border-radius:50%; border:3px solid #0ff; background:black; color:#0ff; font-size:24px;}
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="ui">
  <div id="startScreen">
    <h1>BRIDD JUMP</h1>
    <div id="bestScore">Best Score: 0</div>
    <div id="lastScore">Last Score: 0</div>
    <button id="startBtn">START</button>
    <button id="openAdvanced">âš™</button>
  </div>
</div>

<div id="advancedPanel">
    <h2>Advanced Options</h2>
    <hr style="border-color:#0ff;">
    <div class="adv-row">Walk Particles <input type="range" id="walkParticles" class="adv-slider" min="0" max="100" value="100"> <span id="walkParticlesVal">100%</span></div>
    <div class="adv-row">Jump Particles <input type="range" id="jumpParticles" class="adv-slider" min="0" max="100" value="100"> <span id="jumpParticlesVal">100%</span></div>
    <div class="adv-row">2-Jump Particles <input type="range" id="doubleJumpParticles" class="adv-slider" min="0" max="100" value="100"> <span id="doubleJumpParticlesVal">100%</span></div>
    <div class="adv-row">Gem-Collect Particles <input type="range" id="gemParticles" class="adv-slider" min="0" max="100" value="100"> <span id="gemParticlesVal">100%</span></div>
    <div class="adv-row">White Lines <input type="range" id="whiteLines" class="adv-slider" min="0" max="100" value="100"> <span id="whiteLinesVal">100%</span></div>
    <div class="adv-row">Block Texture <input type="checkbox" id="blockTexture" checked></div>
    <div class="adv-row">Block Press Down <input type="checkbox" id="blockPressDown" checked></div>
    <div class="adv-buttons">
        <button id="cancelAdv">Cancel</button>
        <button id="saveAdv">Save</button>
    </div>
</div>

<script>
const canvas=document.getElementById("gameCanvas"),ctx=canvas.getContext("2d");
canvas.width=window.innerWidth; canvas.height=window.innerHeight;
const BLOCK_SIZE=50,JUMP_SPEED=-15,GRAVITY=0.7;
let score=0,lastScore=0,bestScore=localStorage.getItem("bestScore")?parseInt(localStorage.getItem("bestScore")):0;
let gameStarted=false,animationFrameId,scorePaused=false;
let player={x:100,y:0,width:50,height:50,color:"#0ff",vy:0,speed:8,jumpsLeft:2,onGround:false,visible:true,horizMultiplier:1,vertMultiplier:1};
let platforms=[],spikes=[],crashPieces=[],particles=[],gems=[],lines=[],trailClones=[];
let cameraX=0,cameraY=0; let cheats={float:false,invincible:false,infiniteJump:false};
let qualitySettings={walk:100,jump:100,doubleJump:100,gem:100,lines:100,texture:true,press:true};
let vanish=false,vanishY=0;

// INPUT
let keys={};
window.addEventListener("keydown",e=>{keys[e.code]=true;if(["KeyW","ArrowUp","Space"].includes(e.code)) jump();});
window.addEventListener("keyup",e=>keys[e.code]=false);
window.addEventListener("mousedown",()=>jump());
window.addEventListener("touchstart",()=>jump());

function jump(){if(!player.visible)return;if(cheats.infiniteJump||player.jumpsLeft>0){player.vy=JUMP_SPEED;if(!cheats.infiniteJump)player.jumpsLeft--;spawnParticles(player.x+player.width/2,player.y+player.height,"jump");}}

// GAME
function resetGame(){
    if(animationFrameId) cancelAnimationFrame(animationFrameId);
    lastScore=score; score=0; scorePaused=false;
    player.x=100;player.y=canvas.height/2-player.height;player.vy=0;player.jumpsLeft=2;player.onGround=false;player.visible=true;
    platforms=[{x:0,y:player.y+player.height,width:BLOCK_SIZE*10,height:BLOCK_SIZE,color:"#0ff"}];
    spikes=[]; crashPieces=[]; particles=[]; gems=[]; lines=[]; trailClones=[];
    hideStartScreen(); gameStarted=true; animationFrameId=requestAnimationFrame(update);
}
function hideStartScreen(){document.getElementById("startScreen").style.display="none";}
function showStartScreen(){document.getElementById("bestScore").innerText="Best Score: "+bestScore; document.getElementById("lastScore").innerText="Last Score: "+lastScore; document.getElementById("startScreen").style.display="flex";}

// ADVANCED SETTINGS
const openAdvanced=document.getElementById("openAdvanced");
const advancedPanel=document.getElementById("advancedPanel");
const cancelAdv=document.getElementById("cancelAdv");
const saveAdv=document.getElementById("saveAdv");
openAdvanced.addEventListener("click",()=>advancedPanel.style.display="flex");
cancelAdv.addEventListener("click",()=>advancedPanel.style.display="none");
saveAdv.addEventListener("click",()=>{advancedPanel.style.display="none";});

// SLIDERS
["walkParticles","jumpParticles","doubleJumpParticles","gemParticles","whiteLines"].forEach(id=>{
    const slider=document.getElementById(id);
    const label=document.getElementById(id+"Val");
    slider.addEventListener("input",()=>{label.innerText=slider.value==0?"DISABLED":slider.value==100?"MAX":slider.value+"%"; qualitySettings[id.replace("Particles","").replace("whiteLines","lines")]=parseInt(slider.value);});
});
document.getElementById("blockTexture").addEventListener("change",e=>qualitySettings.texture=e.target.checked);
document.getElementById("blockPressDown").addEventListener("change",e=>qualitySettings.press=e.target.checked);

// PARTICLES
function spawnParticles(x,y,type){
    let amount=type==="walk"?qualitySettings.walk/10:type==="jump"?qualitySettings.jump/10:type==="double"?qualitySettings.doubleJump/10:qualitySettings.gem/10;
    for(let i=0;i<amount;i++){particles.push({x,y,vx:(Math.random()-0.5)*5,vy:(Math.random()-1.5)*5,life:Math.random()*30+20,color:type==="jump"?"#0ff":"#fff"});}
}

// TRAIL
function updateTrail(){trailClones.push({x:player.x,y:player.y,color:player.color,lifetime:75}); trailClones=trailClones.filter(t=>t.lifetime>0); trailClones.forEach(t=>{t.lifetime--; ctx.fillStyle=t.color; ctx.fillRect(t.x-cameraX,t.y-cameraY,player.width,player.height);});}

// VOID DEATH
function checkVoidDeath(){if(player.y>canvas.height) tryDie();}
function tryDie(){player.visible=false; gameStarted=false; if(score>bestScore){bestScore=score; localStorage.setItem("bestScore",bestScore);} setTimeout(showStartScreen,1000);}

// COMMANDS
window.addEventListener("keydown",e=>{
    if(e.ctrlKey && e.shiftKey && e.code==="KeyA"){
        const input=prompt("Enter command:"); if(!input) return;
        const args=input.trim().split(/\s+/); const command=args[0]; const root1=args[1]; const root2=args[2];
        if(command==="/die"){tryDie();}
        else if(command==="/clear"&&root1==="bestScore"){bestScore=0; localStorage.setItem("bestScore",0);}
        else if(command==="/score"){if(root1==="add"&&!isNaN(parseInt(root2))){score+=parseInt(root2);}else if(root1==="set"&&!isNaN(parseInt(root2))){score=parseInt(root2);}else if(root1==="pausd"){scorePaused=true;}else if(root1==="continue"){scorePaused=false;}}
        else if(command==="/pause"){scorePaused=true;}
        else if(command==="/continue"){scorePaused=false;}
        else if(command==="/vanish"){if(root1==="true"){vanish=true; vanishY=player.y;}else if(root1==="false"){vanish=false; player.y=vanishY; player.visible=true;}}
    }
});

// UPDATE LOOP
function update(){
    if(!gameStarted) return;
    if(!scorePaused) score+=0.1;
    if(!vanish){player.y+=player.vy; player.vy+=GRAVITY;}
    cameraX=player.x-150; cameraY=vanish?vanishY-canvas.height/2+player.height*1.5:player.y-canvas.height/2+player.height*1.5;

    ctx.clearRect(0,0,canvas.width,canvas.height);
    // Horizontal lines
    lines.push({x:canvas.width,y:Math.random()*canvas.height,width:50});
    lines.forEach(l=>{l.x-=player.speed*1.5; ctx.strokeStyle="rgba(255,255,255,"+qualitySettings.lines/100+")"; ctx.lineWidth=2; ctx.beginPath(); ctx.moveTo(l.x-cameraX,l.y-cameraY); ctx.lineTo(l.x+50-cameraX,l.y-cameraY); ctx.stroke();});
    lines=lines.filter(l=>l.x>0);

    // Platforms
    platforms.forEach(p=>{ctx.fillStyle=p.color; ctx.fillRect(p.x-cameraX,p.y-cameraY,p.width,p.height);});
    updateTrail();
    if(player.visible){ctx.fillStyle=player.color; ctx.fillRect(player.x-cameraX,player.y-cameraY,player.width,player.height);}
    animationFrameId=requestAnimationFrame(update);
}

// START BUTTON
document.getElementById("startBtn").addEventListener("click",resetGame);
showStartScreen();
</script>
</body>
</html>
