<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Schedule | Infinite Campus</title>
<link rel="icon" type="image/png" href="infinite-campus-icon.png">
<style>
body { margin:0; overflow:hidden; background:black; font-family:sans-serif; }
canvas { display:block; }
#ui { position:absolute; top:0; left:0; width:100%; height:100%; text-align:center; pointer-events:none; }
#startScreen {
    position:absolute; top:50%; left:50%; transform:translate(-50%,-50%);
    width:400px; padding:40px; background:rgba(0,0,0,0.9);
    display:flex; flex-direction:column; justify-content:center; align-items:center;
    pointer-events:all; font-size:30px; color:#0ff; text-shadow:0 0 20px #0ff;
    border:3px solid #0ff; border-radius:20px;
}
button { font-size:32px; padding:15px 40px; cursor:pointer; margin-top:30px; color:#0ff; background:black; border:3px solid #0ff; border-radius:12px; transition:0.3s; }
button:hover { color:black; background:#0ff; }
h1 { font-size:60px; margin-bottom:20px; text-shadow: 0 0 20px #0ff, 0 0 40px #0ff, 0 0 60px #0ff; animation: glow 1.5s infinite alternate; }
@keyframes glow { 0% { text-shadow:0 0 10px #0ff,0 0 20px #0ff;} 100% {text-shadow:0 0 40px #0ff,0 0 80px #0ff;} }

#settingsBtn {
    position:absolute; top:15px; right:15px;
    font-size:28px; cursor:pointer;
    color:#0ff; background:none; border:none;
    text-shadow:0 0 10px #0ff;
    pointer-events:all;
}
#settingsBtn:hover { color:white; }
</style>
</head>
<body>
<canvas id="gameCanvas"></canvas>
<div id="ui">
  <div id="startScreen">
    <h1>BRIDD JUMP</h1>
    <div id="bestScore">Best Score: 0</div>
    <button id="startBtn">START</button>
  </div>
</div>
<button id="settingsBtn">⚙️</button>

<script>
// --- GLOBAL VARIABLES ---
const canvas = document.getElementById("gameCanvas");
const ctx = canvas.getContext("2d");
canvas.width = window.innerWidth;
canvas.height = window.innerHeight;

const BLOCK_SIZE = 50;
const JUMP_SPEED = -15;
const GRAVITY = 0.7;

let testMode = false;
let gemEveryBlock = false;
let oldAccount = null;
let account = "player";

let keys = {}, score = 0, bestScore = localStorage.getItem("bestScore") ? parseInt(localStorage.getItem("bestScore")) : 0;
let lastTime = 0, gameStarted = false, animationFrameId;
let crashPieces = [], particles = [], gems = [], trail = [];
let cheatsUnlocked = false;
let cheats = {float:false, invincible:false, infiniteJump:false};
let startPressCount = 0;

let baseColors = [{r:255,g:0,b:0},{r:255,g:153,b:0},{r:255,g:255,b:0},{r:0,g:255,b:0},{r:0,g:255,b:255},{r:0,g:0,b:255},{r:153,g:0,b:255}];
let colorIndex = 0, platformColor = {r:255,g:0,b:0}, nextColor = baseColors[1], colorLerp = 0;
let globalTime = 0;

let player = {
    x:100, y:0, width:50, height:50,
    color:"#0ff", vy:0, speed:8,
    hitboxScale:0.6, jumpsLeft:2, onGround:false, visible:true,
    horizMultiplier:1, vertMultiplier:1,
    accountEmail:"player@example.com"
};

let platforms = [], spikes = [], lines = [], lastPlatformX = 0, lastPlatformY = 0;

// --- INPUT ---
window.addEventListener("keydown", e=>{ 
    if(["KeyW","ArrowUp","Space"].includes(e.code)) jump(); 
    keys[e.code] = true;
});
window.addEventListener("keyup", e => keys[e.code] = false);
window.addEventListener("mousedown", () => jump());
window.addEventListener("touchstart", () => jump());

function jump(){
    if(!player.visible) return;
    if(cheats.infiniteJump || player.jumpsLeft>0){
        player.vy = JUMP_SPEED;
        spawnParticles(player.x+player.width/2, player.y+player.height, player.jumpsLeft===2?"jump":"double");
        if(!cheats.infiniteJump) player.jumpsLeft--;
    }
}

function resetGame(){
    if(animationFrameId) cancelAnimationFrame(animationFrameId);
    startPressCount++;
    score = 0; colorLerp = 0; globalTime = 0; trail = [];
    player.x = 100; player.y = canvas.height/2-player.height; player.vy = 0; player.speed = 8;
    player.jumpsLeft = 2; player.onGround = false; player.visible = true;
    player.horizMultiplier = 1; player.vertMultiplier = 1;
    platforms = []; spikes = []; crashPieces = []; particles = []; gems = []; lines = [];
    platformColor = {...baseColors[0]}; colorIndex = 0; nextColor = baseColors[1];

    platforms.push({x:0,y:player.y+player.height,width:BLOCK_SIZE*10,height:BLOCK_SIZE,color:{...platformColor}, passed:false});
    lastPlatformX = 0; lastPlatformY = player.y+player.height;

    lastTime = performance.now();
    hideStartScreen();
    gameStarted = true;
    animationFrameId = requestAnimationFrame(update);
}

// --- COMMANDS ---
window.addEventListener("keydown", e => {
    if(e.ctrlKey && e.shiftKey && e.code==="KeyA"){
        const input = prompt("Enter command:");
        if(!input) return;
        const args = input.trim().split(/\s+/);
        const command = args[0];
        const root1 = args[1];
        const root2 = args[2];

        if(command === "/score"){
            if(root1 === "set" && !isNaN(parseInt(root2))) { score = parseInt(root2); }
            if(root1 === "add" && !isNaN(parseInt(root2))) { score += parseInt(root2); }
        }

        if(command === "/clear" && root1 === "bestScore"){
            bestScore = 0;
            localStorage.setItem("bestScore", 0);
        }

        if(command === "/die"){
            score = 0;
        }
    }
});

// --- UI SCREENS ---
function showStartScreen(){ 
    document.getElementById("bestScore").innerText="Best Score: "+bestScore;
    document.getElementById("startScreen").style.display="flex"; 
}
function hideStartScreen(){ document.getElementById("startScreen").style.display="none"; }

// --- SETTINGS BUTTON ---
document.getElementById("settingsBtn").addEventListener("click", () => {
    window.location.href = "settings.html";
});

document.getElementById("startBtn").addEventListener("click", resetGame);
showStartScreen();
</script>
</body>
</html>
